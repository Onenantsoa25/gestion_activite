<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Liste des tâches{% endblock %}</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <!-- Bootstrap Icons CDN (IMPORTANT pour les icônes du sidebar) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Chart.js CDN pour les diagrammes (si nécessaire pour des sous-pages) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        /* Styles pour le corps et le padding pour le sidebar */
        body {
            padding-left: 280px; /* Largeur du sidebar */
            background-color: #F5F5F5; /* Couleur de fond gris très doux pour le contenu principal */
        }
        /* Pour la responsivité sur mobile, vous pourriez vouloir cacher le sidebar fixe et utiliser un offcanvas */
        @media (max-width: 767.98px) { /* Moins de 768px (taille md de Bootstrap) */
            body {
                padding-left: 0; /* Pas de padding sur mobile si le sidebar est un offcanvas */
            }
            .sidebar-fixed-desktop { /* Cache le sidebar fixe sur mobile */
                display: none !important;
            }
        }

        /* Styles pour les cartes du tableau de bord (réutilisés ici) */
        .card {
            border-radius: 12px; /* Bords plus arrondis */
            border: 1px solid #e0e0e0; /* Bordure subtile */
            box-shadow: 0 8px 25px rgba(0,0,0,0.1); /* Ombre moderne et flottante */
        }

        /* Styles pour simuler le graphique en camembert (si des sous-pages l'utilisent) */
        .pie-chart-container {
            position: relative;
            width: 200px; /* Taille du graphique */
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(
                #0d6efd 0% 25%, /* Bleu pour 'en cours' (25%) */
                #dc3545 25% 35%, /* Rouge pour 'à faire' (10%) */
                #198754 35% 100% /* Vert pour 'terminé' (65%) */
            );
            margin: 0 auto; /* Centrer le graphique */
        }

        .pie-chart-legend {
            list-style: none;
            padding: 0;
            margin-top: 1rem;
        }
        .pie-chart-legend li {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .pie-chart-legend .color-box {
            width: 15px;
            height: 15px;
            margin-right: 0.5rem;
            border-radius: 3px;
        }
        .color-box.blue { background-color: #0d6efd; }
        .color-box.red { background-color: #dc3545; }
        .color-box.green { background-color: #198754; }

        /* Styles pour la ligne verticale dans "Temps passé" (si des sous-pages l'utilisent) */
        .vertical-divider {
            border-left: 1px solid #dee2e6; /* Couleur de bordure Bootstrap */
            height: 60px; /* Hauteur de la ligne */
            margin: 0 1.5rem;
        }
    </style>
    {% block stylesheets %}{% endblock %}
</head>
<body>
    {# Inclusion directe du Sidebar #}
    <div class="sidebar-fixed-desktop">
        {% include 'components/sidebar.html.twig' %}
    </div>

    <main class="container-fluid py-4">
        <h1 class="mb-4 text-center">Liste des tâches</h1>

        {# Section des filtres - Sans fond de carte #}
        <div class="mb-4 px-3"> {# Ajout de padding horizontal pour l'alignement #}
            {# <h5 class="card-title mb-3 text-center">Filtres</h5> #}
            <div class="row justify-content-center align-items-center g-3"> {# g-3 pour un espacement plus compact #}
                <div class="col-md-3 col-sm-6">
                    <select class="form-select shadow-sm" aria-label="Type d'activité">
                        <option selected>Type d'activité</option>
                        <option value="1">Activité A</option>
                        <option value="2">Activité B</option>
                        <option value="3">Activité C</option>
                    </select>
                </div>
                <div class="col-md-3 col-sm-6">
                    <select class="form-select shadow-sm" aria-label="Type de client">
                        <option selected>Type de client</option>
                        <option value="1">Client X</option>
                        <option value="2">Client Y</option>
                        <option value="3">Client Z</option>
                    </select>
                </div>
                <div class="col-md-3 col-sm-6">
                    <select class="form-select shadow-sm" aria-label="Type de service">
                        <option selected>Type de service</option>
                        <option value="1">Service 1</option>
                        <option value="2">Service 2</option>
                        <option value="3">Service 3</option>
                    </select>
                </div>
                <div class="col-md-auto col-sm-6"> {# col-md-auto pour que le bouton prenne juste la largeur nécessaire #}
                    <button type="button" class="btn btn-primary w-100" id="filterButton">Filtrer</button>
                </div>
            </div>
        </div>

        <div class="row g-4">
            {# Section du tableau des tâches dans une carte #}
            <div class="col-md-12">
                <div class="card h-100">
                    <div class="card-body p-0">
                        <h5 class="card-title mb-3 px-4 pt-4 text-center">Détails des tâches</h5>
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th scope="col">Libellé</th>
                                        <th scope="col">Date d'échéance</th>
                                        <th scope="col">Priorité</th>
                                        <th scope="col">Temps d'estimation</th>
                                        <th scope="col">Activité</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Préparer rapport mensuel</td>
                                        <td>30/07/2025</td>
                                        <td>Urgente</td>
                                        <td>3</td>
                                        <td>Activité A</td>
                                    </tr>
                                    <tr>
                                        <td>Préparer rapport mensuel</td>
                                        <td>30/07/2025</td>
                                        <td>Urgente</td>
                                        <td>3</td>
                                        <td>Activité A</td>
                                    </tr>
                                    {# Ajoutez d'autres lignes de données ici si nécessaire #}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {# Ce bloc peut être rempli par les templates qui étendent ce layout #}
        {% block page_content %}{% endblock %}
    </main>

    <!-- Bootstrap JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    {% block javascripts %}{% endblock %}

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const filterButton = document.getElementById('filterButton');

            filterButton.addEventListener('click', function() {
                const activityType = document.querySelector('select[aria-label="Type d\'activité"]').value;
                const clientType = document.querySelector('select[aria-label="Type de client"]').value;
                const serviceType = document.querySelector('select[aria-label="Type de service"]').value;

                console.log('Filtrage déclenché avec les valeurs :');
                console.log('Type d\'activité:', activityType);
                console.log('Type de client:', clientType);
                console.log('Type de service:', serviceType);

                // Ici, vous intégrerez votre logique de filtrage réelle.
                // Par exemple, une requête Fetch API vers votre backend Symfony
                // pour récupérer les tâches filtrées et mettre à jour le tableau.
            });
        });
    </script>
</body>
</html>
